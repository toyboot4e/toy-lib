<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- | `Ix`-based API over `vector`.</span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.IxVector</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Primitive</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.ST</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Graph.html"><span class="hs-identifier">Data.Graph</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Graph.html#Vertex"><span class="hs-identifier">Vertex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Ix</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VG</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic.Mutable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VGM</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Unboxed</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VU</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Unboxed.Mutable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VUM</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="ToyLib.Macro.html"><span class="hs-identifier">ToyLib.Macro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="ToyLib.Macro.html#dbgAssert"><span class="hs-identifier">dbgAssert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">-- | N-dimensional @Vector@ or @MVector@ with `Data.Ix`.</span><span>
</span><span id="line-19"></span><span class="hs-keyword">data</span><span> </span><span id="IxVector"><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-var">IxVector</span></a></span></span><span> </span><span id="local-6989586621679140812"><span class="annot"><a href="#local-6989586621679140812"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679140811"><span class="annot"><a href="#local-6989586621679140811"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IxVector"><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-var">IxVector</span></a></span></span><span> </span><span class="hs-special">{</span><span id="boundsIV"><span class="annot"><span class="annottext">forall v i. IxVector v i -&gt; (i, i)
</span><a href="Data.IxVector.html#boundsIV"><span class="hs-identifier hs-var hs-var">boundsIV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140811"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679140811"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="vecIV"><span class="annot"><span class="annottext">forall v i. IxVector v i -&gt; v
</span><a href="Data.IxVector.html#vecIV"><span class="hs-identifier hs-var hs-var">vecIV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679140812"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span id="local-6989586621679140803"><span id="local-6989586621679140804"><span id="local-6989586621679140805"><span class="annot"><a href="Data.IxVector.html#.%21"><span class="hs-operator hs-type">(.!)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ix</span></span><span> </span><span class="annot"><a href="#local-6989586621679140805"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VG.Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679140804"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140803"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140804"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140803"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140805"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140805"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140803"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-22"></span><span id=".%21"><span class="annot"><span class="annottext">.! :: forall i (v :: * -&gt; *) a.
(Ix i, Vector v a) =&gt;
IxVector (v a) i -&gt; i -&gt; a
</span><a href="Data.IxVector.html#.%21"><span class="hs-operator hs-var hs-var">(.!)</span></a></span></span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679140737"><span id="local-6989586621679140738"><span class="annot"><span class="annottext">v a
(i, i)
vecIV :: v a
boundsIV :: (i, i)
vecIV :: forall v i. IxVector v i -&gt; v
boundsIV :: forall v i. IxVector v i -&gt; (i, i)
</span><a href="#local-6989586621679140737"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679140736"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140736"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v a
</span><a href="#local-6989586621679140737"><span class="hs-identifier hs-var">vecIV</span></a></span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. Vector v a =&gt; v a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">VG.!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140738"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140736"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-comment">-- | Reads a value from `IxVector`.</span><span>
</span><span id="line-25"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.IxVector.html#readIV"><span class="hs-pragma hs-type">readIV</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-26"></span><span id="local-6989586621679140791"><span id="local-6989586621679140792"><span id="local-6989586621679140794"><span id="local-6989586621679140795"><span class="annot"><a href="Data.IxVector.html#readIV"><span class="hs-identifier hs-type">readIV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ix</span></span><span> </span><span class="annot"><a href="#local-6989586621679140795"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679140794"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VGM.MVector</span></span><span> </span><span class="annot"><a href="#local-6989586621679140792"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140791"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140792"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimState</span></span><span> </span><span class="annot"><a href="#local-6989586621679140794"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140791"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140795"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140795"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140794"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140791"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-27"></span><span id="readIV"><span class="annot"><span class="annottext">readIV :: forall i (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(Ix i, PrimMonad m, MVector v a) =&gt;
IxVector (v (PrimState m) a) i -&gt; i -&gt; m a
</span><a href="Data.IxVector.html#readIV"><span class="hs-identifier hs-var hs-var">readIV</span></a></span></span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679140725"><span id="local-6989586621679140726"><span class="annot"><span class="annottext">v (PrimState m) a
(i, i)
vecIV :: v (PrimState m) a
boundsIV :: (i, i)
vecIV :: forall v i. IxVector v i -&gt; v
boundsIV :: forall v i. IxVector v i -&gt; (i, i)
</span><a href="#local-6989586621679140725"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679140724"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140724"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; m a
</span><span class="hs-identifier hs-var">VGM.read</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679140725"><span class="hs-identifier hs-var">vecIV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140726"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140724"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-comment">-- | Writes a value to `IxVector`.</span><span>
</span><span id="line-30"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.IxVector.html#writeIV"><span class="hs-pragma hs-type">writeIV</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-31"></span><span id="local-6989586621679140778"><span id="local-6989586621679140779"><span id="local-6989586621679140780"><span id="local-6989586621679140781"><span class="annot"><a href="Data.IxVector.html#writeIV"><span class="hs-identifier hs-type">writeIV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ix</span></span><span> </span><span class="annot"><a href="#local-6989586621679140781"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679140780"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VGM.MVector</span></span><span> </span><span class="annot"><a href="#local-6989586621679140779"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140778"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140779"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimState</span></span><span> </span><span class="annot"><a href="#local-6989586621679140780"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140778"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140781"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140781"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140778"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140780"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-32"></span><span id="writeIV"><span class="annot"><span class="annottext">writeIV :: forall i (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(Ix i, PrimMonad m, MVector v a) =&gt;
IxVector (v (PrimState m) a) i -&gt; i -&gt; a -&gt; m ()
</span><a href="Data.IxVector.html#writeIV"><span class="hs-identifier hs-var hs-var">writeIV</span></a></span></span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679140714"><span id="local-6989586621679140715"><span class="annot"><span class="annottext">v (PrimState m) a
(i, i)
vecIV :: v (PrimState m) a
boundsIV :: (i, i)
vecIV :: forall v i. IxVector v i -&gt; v
boundsIV :: forall v i. IxVector v i -&gt; (i, i)
</span><a href="#local-6989586621679140714"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679140713"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140713"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679140712"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679140712"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">VGM.write</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679140714"><span class="hs-identifier hs-var">vecIV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140715"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140713"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679140712"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.IxVector.html#modifyIV"><span class="hs-pragma hs-type">modifyIV</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-35"></span><span id="local-6989586621679140767"><span id="local-6989586621679140768"><span id="local-6989586621679140769"><span id="local-6989586621679140770"><span class="annot"><a href="Data.IxVector.html#modifyIV"><span class="hs-identifier hs-type">modifyIV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ix</span></span><span> </span><span class="annot"><a href="#local-6989586621679140770"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679140769"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VGM.MVector</span></span><span> </span><span class="annot"><a href="#local-6989586621679140768"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140767"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140768"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimState</span></span><span> </span><span class="annot"><a href="#local-6989586621679140769"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140767"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140770"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140767"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140770"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140769"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-36"></span><span id="modifyIV"><span class="annot"><span class="annottext">modifyIV :: forall i (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(Ix i, PrimMonad m, MVector v a) =&gt;
IxVector (v (PrimState m) a) i -&gt; (a -&gt; a) -&gt; i -&gt; m ()
</span><a href="Data.IxVector.html#modifyIV"><span class="hs-identifier hs-var hs-var">modifyIV</span></a></span></span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679140702"><span id="local-6989586621679140703"><span class="annot"><span class="annottext">v (PrimState m) a
(i, i)
vecIV :: v (PrimState m) a
boundsIV :: (i, i)
vecIV :: forall v i. IxVector v i -&gt; v
boundsIV :: forall v i. IxVector v i -&gt; (i, i)
</span><a href="#local-6989586621679140702"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679140701"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679140701"><span class="hs-identifier hs-var">alter</span></a></span></span><span> </span><span id="local-6989586621679140700"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140700"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; (a -&gt; a) -&gt; Int -&gt; m ()
</span><span class="hs-identifier hs-var">VGM.modify</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679140702"><span class="hs-identifier hs-var">vecIV</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679140701"><span class="hs-identifier hs-var">alter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140703"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140700"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.IxVector.html#swapIV"><span class="hs-pragma hs-type">swapIV</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-39"></span><span id="local-6989586621679140756"><span id="local-6989586621679140757"><span id="local-6989586621679140758"><span id="local-6989586621679140759"><span class="annot"><a href="Data.IxVector.html#swapIV"><span class="hs-identifier hs-type">swapIV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ix</span></span><span> </span><span class="annot"><a href="#local-6989586621679140759"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679140758"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VGM.MVector</span></span><span> </span><span class="annot"><a href="#local-6989586621679140757"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679140756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679140757"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimState</span></span><span> </span><span class="annot"><a href="#local-6989586621679140758"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679140759"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140759"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140759"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679140758"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-40"></span><span id="swapIV"><span class="annot"><span class="annottext">swapIV :: forall i (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(Ix i, PrimMonad m, MVector v a) =&gt;
IxVector (v (PrimState m) a) i -&gt; i -&gt; i -&gt; m ()
</span><a href="Data.IxVector.html#swapIV"><span class="hs-identifier hs-var hs-var">swapIV</span></a></span></span><span> </span><span class="annot"><a href="Data.IxVector.html#IxVector"><span class="hs-identifier hs-type">IxVector</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679140689"><span id="local-6989586621679140690"><span class="annot"><span class="annottext">v (PrimState m) a
(i, i)
vecIV :: v (PrimState m) a
boundsIV :: (i, i)
vecIV :: forall v i. IxVector v i -&gt; v
boundsIV :: forall v i. IxVector v i -&gt; (i, i)
</span><a href="#local-6989586621679140689"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679140688"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140688"><span class="hs-identifier hs-var">i1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679140687"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140687"><span class="hs-identifier hs-var">i2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; Int -&gt; m ()
</span><span class="hs-identifier hs-var">VGM.swap</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679140689"><span class="hs-identifier hs-var">vecIV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140690"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140688"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">index</span></span><span> </span><span class="annot"><span class="annottext">(i, i)
</span><a href="#local-6989586621679140690"><span class="hs-identifier hs-var">boundsIV</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679140687"><span class="hs-identifier hs-var">i2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span></pre></body></html>