<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.SegmentTree.Strict</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">toy-lib-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Data.SegmentTree.Strict.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.SegmentTree.Strict</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:SegmentTree">SegmentTree</a> v s a = <a href="#v:SegmentTree">SegmentTree</a> (a -&gt; a -&gt; a) (v s a)</li><li class="src short"><a href="#v:newSTreeVG">newSTreeVG</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a)</li><li class="src short"><a href="#v:newSTreeV">newSTreeV</a> :: <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="../vector-0.12.3.1/Data-Vector-Mutable.html#t:MVector" title="Data.Vector.Mutable">MVector</a> (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a)</li><li class="src short"><a href="#v:newSTreeVU">newSTreeVU</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Unboxed.html#t:Unbox" title="Data.Vector.Unboxed">Unbox</a> a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="../vector-0.12.3.1/Data-Vector-Unboxed.html#t:MVector" title="Data.Vector.Unboxed">MVector</a> (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a)</li><li class="src short"><a href="#v:resetSTree">resetSTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:insertSTree">insertSTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:modifySTree">modifySTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; (a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:_updateElement">_updateElement</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:querySTree">querySTree</a> :: <span class="keyword">forall</span> v a m. (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SegmentTree" class="def">SegmentTree</a> v s a <a href="src/Data.SegmentTree.Strict.html#SegmentTree" class="link">Source</a> <a href="#t:SegmentTree" class="selflink">#</a></p><div class="doc"><p>A mutable segment tree backed by a complete binary tree.</p><p># Overview</p><p>A segment tree is a cache of a folding function.
 Each node corresponds to a folding range and the node contains the folding result.</p><p>A segment tree has a constant size and never be resized.</p><p># Operations</p><p>Modification takes $O(log N)$, so creation takes $N(log N)$.
 Lookup takes $O(log N)$.</p><p># (Internal) Indices</p><p>The complete binary tree has `2 ^ depth - 1` elements.</p><ul><li>Child elements of a parent node <code>i</code> has index `2 * i + 1` and `2 * i + 2`.</li><li>The leaf indices start with `length / 2 - 1`.</li></ul><p>Example:</p><p>```
            0
      1           2
   3     4     5     6
 07 08 09 10 11 12 13 14
 ```</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SegmentTree" class="def">SegmentTree</a> (a -&gt; a -&gt; a) (v s a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:newSTreeVG" class="def">newSTreeVG</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a) <a href="src/Data.SegmentTree.Strict.html#newSTreeVG" class="link">Source</a> <a href="#v:newSTreeVG" class="selflink">#</a></p><div class="doc"><p>Creates a new segment tree for <code>n</code> leaves.
 REMARK: Always give a zero value. It fills all the nodes including parent nodes, and the parent
 nodes are not updated.</p></div></div><div class="top"><p class="src"><a id="v:newSTreeV" class="def">newSTreeV</a> :: <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="../vector-0.12.3.1/Data-Vector-Mutable.html#t:MVector" title="Data.Vector.Mutable">MVector</a> (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a) <a href="src/Data.SegmentTree.Strict.html#newSTreeV" class="link">Source</a> <a href="#v:newSTreeV" class="selflink">#</a></p><div class="doc"><p>Creates a boxed segment tree.</p></div></div><div class="top"><p class="src"><a id="v:newSTreeVU" class="def">newSTreeVU</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Unboxed.html#t:Unbox" title="Data.Vector.Unboxed">Unbox</a> a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; (a -&gt; a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m (<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="../vector-0.12.3.1/Data-Vector-Unboxed.html#t:MVector" title="Data.Vector.Unboxed">MVector</a> (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a) <a href="src/Data.SegmentTree.Strict.html#newSTreeVU" class="link">Source</a> <a href="#v:newSTreeVU" class="selflink">#</a></p><div class="doc"><p>Creates an unboxed segment tree.</p></div></div><div class="top"><p class="src"><a id="v:resetSTree" class="def">resetSTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; a -&gt; m () <a href="src/Data.SegmentTree.Strict.html#resetSTree" class="link">Source</a> <a href="#v:resetSTree" class="selflink">#</a></p><div class="doc"><p>Sets all the internal values of a segment tree to the given value which has to be zero.</p><p>REMARK: It takes lots of time. Consider a much more efficient resettiong strategy such as
 re-inserting zeros to used slots, or maybe use | <code>compressInvNumVG</code> when you just need
 inversion number.</p></div></div><div class="top"><p class="src"><a id="v:insertSTree" class="def">insertSTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m () <a href="src/Data.SegmentTree.Strict.html#insertSTree" class="link">Source</a> <a href="#v:insertSTree" class="selflink">#</a></p><div class="doc"><p>Updates an <code><a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a></code> leaf value and their parents up to top root.</p></div></div><div class="top"><p class="src"><a id="v:modifySTree" class="def">modifySTree</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; (a -&gt; a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m () <a href="src/Data.SegmentTree.Strict.html#modifySTree" class="link">Source</a> <a href="#v:modifySTree" class="selflink">#</a></p><div class="doc"><p>Updates an <code><a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a></code> leaf value and their parents up to top root.</p></div></div><div class="top"><p class="src"><a id="v:_updateElement" class="def">_updateElement</a> :: (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m () <a href="src/Data.SegmentTree.Strict.html#_updateElement" class="link">Source</a> <a href="#v:_updateElement" class="selflink">#</a></p><div class="doc"><p>(Internal) Updates an <code><a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a></code> element (node or leaf) value and their parents up to top root.
 REMARK: It's faster to not INLINE the recursive function:</p></div></div><div class="top"><p class="src"><a id="v:querySTree" class="def">querySTree</a> :: <span class="keyword">forall</span> v a m. (<a href="../vector-0.12.3.1/Data-Vector-Generic-Mutable-Base.html#t:MVector" title="Data.Vector.Generic.Mutable.Base">MVector</a> v a, <a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimMonad" title="Control.Monad.Primitive">PrimMonad</a> m) =&gt; <a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> v (<a href="../primitive-0.7.3.0/Control-Monad-Primitive.html#t:PrimState" title="Control.Monad.Primitive">PrimState</a> m) a -&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Data.SegmentTree.Strict.html#querySTree" class="link">Source</a> <a href="#v:querySTree" class="selflink">#</a></p><div class="doc"><p>Retrieves the folding result over the inclusive range `[l, r]` from <code><a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>