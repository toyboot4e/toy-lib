<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Graph.Tree.Hld</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">toy-lib-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Graph.Tree.Hld</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Construction</a></li><li><a href="#g:2">LCA and paths</a></li><li><a href="#g:3">Folding methods</a></li><li><a href="#g:4"><code>TreeMonoid</code></a><ul><li><a href="#g:5">Construction</a></li><li><a href="#g:6">Segment tree methods</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Heavy-light decomposition. Heavily inspired by <code>cojna/iota</code> and <code>maspypy/library</code>.</p><p>HLD lets you find LCA in <span class="mathjax">\(O(\log V)\)</span> time and lets you fold monoids on a path in
 <span class="mathjax">\(O(\log^2 V)\)</span> time with the help of segment trees.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:VertexHLD">VertexHLD</a> = <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HLD">HLD</a> = <a href="#v:HLD">HLD</a> {<ul class="subs"><li><a href="#v:parentHLD">parentHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>)</li><li><a href="#v:indexHLD">indexHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)</li><li><a href="#v:headHLD">headHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>)</li></ul>}</li><li class="src short"><a href="#v:hldOf">hldOf</a> :: <span class="keyword">forall</span> w. <a href="Data-Graph-Sparse.html#t:SparseGraph" title="Data.Graph.Sparse">SparseGraph</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> w -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></li><li class="src short"><a href="#v:lcaHLD">lcaHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></li><li class="src short"><a href="#v:_pathHLD">_pathHLD</a> :: <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)]</li><li class="src short"><a href="#v:edgePathHLD">edgePathHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)]</li><li class="src short"><a href="#v:vertPathHLD">vertPathHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)]</li><li class="src short"><a href="#v:_foldHLD">_foldHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono</li><li class="src short"><a href="#v:foldEdgesCommuteHLD">foldEdgesCommuteHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono</li><li class="src short"><a href="#v:foldEdgesHLD">foldEdgesHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono</li><li class="src short"><a href="#v:foldVertsCommuteHLD">foldVertsCommuteHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono</li><li class="src short"><a href="#v:foldVertsHLD">foldVertsHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono</li><li class="src short"><span class="keyword">data</span> <a href="#t:TreeMonoid">TreeMonoid</a> a s = <a href="#v:TreeMonoid">TreeMonoid</a> {<ul class="subs"><li><a href="#v:hldTM">hldTM</a> :: !<a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></li><li><a href="#v:isCommuteTM">isCommuteTM</a> :: !<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li><li><a href="#v:isEdgeTM">isEdgeTM</a> :: !<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li><li><a href="#v:streeFTM">streeFTM</a> :: !(<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:MVector" title="Data.Bit.ThreadSafe">MVector</a> s a)</li><li><a href="#v:streeBTM">streeBTM</a> :: !(<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:MVector" title="Data.Bit.ThreadSafe">MVector</a> s (<a href="file:///nix/store/pqp399qjrzfw0nnvqqyv36k49fd7270n-ghc-9.4.6-doc/share/doc/ghc/html/libraries/base-4.17.2.0/Data-Monoid.html#t:Dual" title="Data.Monoid">Dual</a> a))</li></ul>}</li><li class="src short"><a href="#v:_buildRawTM">_buildRawTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> a -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m))</li><li class="src short"><a href="#v:buildVertTM">buildVertTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> a -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m))</li><li class="src short"><a href="#v:edgeVertsHLD">edgeVertsHLD</a> :: <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a) -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a)</li><li class="src short"><a href="#v:buildEdgeTM">buildEdgeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a) -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m))</li><li class="src short"><a href="#v:foldTM">foldTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m a</li><li class="src short"><a href="#v:readTM">readTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m a</li><li class="src short"><a href="#v:writeTM">writeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:exchangeTM">exchangeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; a -&gt; m a</li><li class="src short"><a href="#v:modifyTM">modifyTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; (a -&gt; a) -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> -&gt; m ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:VertexHLD" class="def">VertexHLD</a> = <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> <a href="#t:VertexHLD" class="selflink">#</a></p><div class="doc"><p>Vertex reindexed by <code><a href="Data-Graph-Tree-Hld.html#v:indexHLD" title="Data.Graph.Tree.Hld">indexHLD</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HLD" class="def">HLD</a> <a href="#t:HLD" class="selflink">#</a></p><div class="doc"><p>HLD splits a tree into lines. Lines are often called &quot;paths&quot;, but here we say &quot;lines&quot; for
 avoiding word conflicts.</p><h1>Example</h1><h2>Original tree</h2><p>Consider a tree with arbitrary vertex order:</p><pre> 0==8==7==3==1==2==12==13==15==15     XX: vertex
    |        |                         ==: edge on the same line
10==5        11==8==6                  --: edge between different lines
    |
    4
</pre><h2><code><a href="Data-Graph-Tree-Hld.html#v:indexHLD" title="Data.Graph.Tree.Hld">indexHLD</a></code> visualized</h2><p>The tree vertices are reindexed with <code><a href="Data-Graph-Tree-Hld.html#v:indexHLD" title="Data.Graph.Tree.Hld">indexHLD</a></code>, ensuring vertices in each line have consecutive
 numbers:</p><pre> 0==1==2==3==4==5==6==7==8==9
    |        |
14==13       10==11==12
    |
    15
</pre><p>Note that vertices on higher lines are assigned smaller numbers.</p><h2><code><a href="Data-Graph-Tree-Hld.html#v:headHLD" title="Data.Graph.Tree.Hld">headHLD</a></code> visualized</h2><p><code><a href="Data-Graph-Tree-Hld.html#v:headHLD" title="Data.Graph.Tree.Hld">headHLD</a></code> can be used for finding LCA of two vertices. To find the LCA, move up to the head, go
 up to the parental line's vertex and repeat until they are on the same line.</p><pre> 0==0==0==0==0==0==0==0==0==0
    |     |
13==13     10==10==10
    |
    15
</pre><p><code><a href="Data-Graph-Tree-Hld.html#v:headHLD" title="Data.Graph.Tree.Hld">headHLD</a></code> also works for identifying lines. When the two vertices are on the same line, they have
 the same head.</p><h2><code><a href="Data-Graph-Tree-Hld.html#v:parentHLD" title="Data.Graph.Tree.Hld">parentHLD</a></code> visualized</h2><p><code><a href="Data-Graph-Tree-Hld.html#v:parentHLD" title="Data.Graph.Tree.Hld">parentHLD</a></code> lets you go up to the parental line's vertex from a head:</p><pre>(-1)==0==1==2==3==4==5==6==-7==8
      |        |
  13==1        4==10==11
      |
     13
</pre><h1>Segment tree integration</h1><p>With HLD, we can find a path between two vertices <code>u</code>, <code>v</code>: <code>u</code> -&gt; <code>lca(u, v)</code> -&gt; <code>v</code>. The path
 is composed of line slices, which can be fastly folded with a segment tree.</p><h2>Vertex monoid folding on a path</h2><p>If vertices have weights, use <code><a href="Data-Graph-Tree-Hld.html#v:foldVertsCommuteHLD" title="Data.Graph.Tree.Hld">foldVertsCommuteHLD</a></code> or <code><a href="Data-Graph-Tree-Hld.html#v:foldVertsHLD" title="Data.Graph.Tree.Hld">foldVertsHLD</a></code>.</p><h2>Edge monoid folding on a path</h2><p>If edges have weights, you can either treat the edges as new vertices or put weight to the depper
 index.</p><p>Idea 1. Treat edges as new vertices.</p><pre>o--o--o  -&gt; o-x-o-x-o
</pre><p>Idea 2. Assign edge weight to the deeper vertex. This is the idea of <code><a href="Data-Graph-Tree-Hld.html#v:foldEdgesCommuteHLD" title="Data.Graph.Tree.Hld">foldEdgesCommuteHLD</a></code> and
 <code><a href="Data-Graph-Tree-Hld.html#v:foldEdgesHLD" title="Data.Graph.Tree.Hld">foldEdgesHLD</a></code>:</p><pre>  o
  | &lt;--- edge 1
  o &lt;- write wegiht 1 here
  | &lt;--- edge 2
  o &lt;- write wegiht 2 here
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HLD" class="def">HLD</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:parentHLD" class="def">parentHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>)</dfn><div class="doc"><p><code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code> -&gt; Parent <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></li><li><dfn class="src"><a id="v:indexHLD" class="def">indexHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)</dfn><div class="doc"><p><code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code> -&gt; Reindexed vertex (<code><a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a></code>).</p></div></li><li><dfn class="src"><a id="v:headHLD" class="def">headHLD</a> :: !(<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>)</dfn><div class="doc"><p><code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code> -&gt; The line's head <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:HLD">Instances</h4><details id="i:HLD" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HLD:Show:1"></span> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Show" title="Distribution.Compat.Prelude">Show</a> <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></span> <a href="#t:HLD" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HLD:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Graph-Tree-Hld.html">Data.Graph.Tree.Hld</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:ShowS" title="Distribution.Compat.Prelude">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a>] -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:ShowS" title="Distribution.Compat.Prelude">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HLD:Eq:2"></span> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Eq" title="Distribution.Compat.Prelude">Eq</a> <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></span> <a href="#t:HLD" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HLD:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Graph-Tree-Hld.html">Data.Graph.Tree.Hld</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Construction</h1></a><div class="top"><p class="src"><a id="v:hldOf" class="def">hldOf</a> :: <span class="keyword">forall</span> w. <a href="Data-Graph-Sparse.html#t:SparseGraph" title="Data.Graph.Sparse">SparseGraph</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> w -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> <a href="#v:hldOf" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(V)\)</span> Heavy-light decomposition or Centroid Path Decomposition construction.</p></div></div><a href="#g:2" id="g:2"><h1>LCA and paths</h1></a><div class="top"><p class="src"><a id="v:lcaHLD" class="def">lcaHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> <a href="#v:lcaHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> HLD calculation.</p><h1>Typical Problems</h1><p><a href="https://atcoder.jp/contests/abc133/tasks/abc133_f">ABC 133 - F</a></p></div></div><div class="top"><p class="src"><a id="v:_pathHLD" class="def">_pathHLD</a> :: <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)] <a href="#v:_pathHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> Shared implementation of <code><a href="Data-Graph-Tree-Hld.html#v:edgePathHLD" title="Data.Graph.Tree.Hld">edgePathHLD</a></code> and <code><a href="Data-Graph-Tree-Hld.html#v:vertPathHLD" title="Data.Graph.Tree.Hld">vertPathHLD</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:edgePathHLD" class="def">edgePathHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)] <a href="#v:edgePathHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> Returns inclusive edge vertex pairs.</p></div></div><div class="top"><p class="src"><a id="v:vertPathHLD" class="def">vertPathHLD</a> :: <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; [(<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>, <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a>)] <a href="#v:vertPathHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> Returns inclusive vertex pairs per HLD line.</p></div></div><a href="#g:3" id="g:3"><h1>Folding methods</h1></a><div class="top"><p class="src"><a id="v:_foldHLD" class="def">_foldHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono <a href="#v:_foldHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> The common implementation of <code>foldEdges*HLD</code> variants.</p></div></div><div class="top"><p class="src"><a id="v:foldEdgesCommuteHLD" class="def">foldEdgesCommuteHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono <a href="#v:foldEdgesCommuteHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(\log V)\)</span> Folds commutative monoids on a tree edges using HLD. Prefer to use the wrapper
 <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code>.</p><h1>Typical Problems</h1><ul><li><a href="https://atcoder.jp/contests/abc294/tasks/abc294_g">ABC 294 - G</a></li></ul></div></div><div class="top"><p class="src"><a id="v:foldEdgesHLD" class="def">foldEdgesHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono <a href="#v:foldEdgesHLD" class="selflink">#</a></p><div class="doc"><p>Folds commutative monoids on a tree vertices using HLD. Prefer to use the wrapper <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code>.</p><p>TODO: verify</p></div></div><div class="top"><p class="src"><a id="v:foldVertsCommuteHLD" class="def">foldVertsCommuteHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono <a href="#v:foldVertsCommuteHLD" class="selflink">#</a></p><div class="doc"><p>Folds commutative monoids on a tree vertices using HLD. Prefer to use the wrapper <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code>.</p><h1>Typical Problems</h1><ul><li><a href="https://judge.yosupo.jp/problem/vertex_add_path_sum">Vertex Add Path Sum - Library Checker</a></li></ul></div></div><div class="top"><p class="src"><a id="v:foldVertsHLD" class="def">foldVertsHLD</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> mono, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Monad" title="Distribution.Compat.Prelude">Monad</a> m) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; (<a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; <a href="Data-Graph-Tree-Hld.html#t:VertexHLD" title="Data.Graph.Tree.Hld">VertexHLD</a> -&gt; m mono) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m mono <a href="#v:foldVertsHLD" class="selflink">#</a></p><div class="doc"><p>Folds non-commutative monoids on a tree vertices using HLD. Prefer to use the wrapper
 <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code>.</p><h1>Typical Problems</h1><ul><li><a href="https://judge.yosupo.jp/problem/vertex_set_path_composite">Vertex Set Path Composite - Library Checker</a></li></ul></div></div><a href="#g:4" id="g:4"><h1><code>TreeMonoid</code></h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TreeMonoid" class="def">TreeMonoid</a> a s <a href="#t:TreeMonoid" class="selflink">#</a></p><div class="doc"><p>HLD wrapper for folding paths on a tree using <code><a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></code> and segment tree(s).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TreeMonoid" class="def">TreeMonoid</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:hldTM" class="def">hldTM</a> :: !<a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a></dfn><div class="doc"><p>Borrowed HLD.</p></div></li><li><dfn class="src"><a id="v:isCommuteTM" class="def">isCommuteTM</a> :: !<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></dfn><div class="doc"><p>Indicates if it's targetting commutative monoids.</p></div></li><li><dfn class="src"><a id="v:isEdgeTM" class="def">isEdgeTM</a> :: !<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></dfn><div class="doc"><p>Indicates if it's targetting edge weights. (If not, it's targetting vertex weights on no).</p></div></li><li><dfn class="src"><a id="v:streeFTM" class="def">streeFTM</a> :: !(<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:MVector" title="Data.Bit.ThreadSafe">MVector</a> s a)</dfn><div class="doc"><p>Segment tree for folding upwards.</p></div></li><li><dfn class="src"><a id="v:streeBTM" class="def">streeBTM</a> :: !(<a href="Data-SegmentTree-Strict.html#t:SegmentTree" title="Data.SegmentTree.Strict">SegmentTree</a> <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:MVector" title="Data.Bit.ThreadSafe">MVector</a> s (<a href="file:///nix/store/pqp399qjrzfw0nnvqqyv36k49fd7270n-ghc-9.4.6-doc/share/doc/ghc/html/libraries/base-4.17.2.0/Data-Monoid.html#t:Dual" title="Data.Monoid">Dual</a> a))</dfn><div class="doc"><p>Segment tree for folding downwards. Only created when the monoid is not commutative.</p></div></li></ul></div></td></tr></table></div></div><a href="#g:5" id="g:5"><h2>Construction</h2></a><div class="top"><p class="src"><a id="v:_buildRawTM" class="def">_buildRawTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> a -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m)) <a href="#v:_buildRawTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(V)\)</span> Shared implementation of <code><a href="Data-Graph-Tree-Hld.html#v:buildVertTM" title="Data.Graph.Tree.Hld">buildVertTM</a></code> and <code><a href="Data-Graph-Tree-Hld.html#v:buildEdgeTM" title="Data.Graph.Tree.Hld">buildEdgeTM</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:buildVertTM" class="def">buildVertTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> a -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m)) <a href="#v:buildVertTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(V)\)</span> Builds a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> on vertices.</p></div></div><div class="top"><p class="src"><a id="v:edgeVertsHLD" class="def">edgeVertsHLD</a> :: <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a) -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a) <a href="#v:edgeVertsHLD" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(V)\)</span> Map weightened edges into <code>(Vertex, a)</code> pairs. The output is the input to <code><a href="Data-Graph-Tree-Hld.html#v:buildEdgeTM" title="Data.Graph.Tree.Hld">buildEdgeTM</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:buildEdgeTM" class="def">buildEdgeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:HLD" title="Data.Graph.Tree.Hld">HLD</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/bitvec-1.1.5.0-878c3170d6d34b1cd0a0492ffea13e7516b525093c2bc3ff8a0c6bd8ac9dcf2c/share/doc/html/Data-Bit-ThreadSafe.html#t:Vector" title="Data.Bit.ThreadSafe">Vector</a> (<a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a>, a) -&gt; m (<a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m)) <a href="#v:buildEdgeTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(V)\)</span> Builds a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> on edges. **The input must be the output of <code><a href="Data-Graph-Tree-Hld.html#v:edgeVertsHLD" title="Data.Graph.Tree.Hld">edgeVertsHLD</a></code>**.</p></div></div><a href="#g:6" id="g:6"><h2>Segment tree methods</h2></a><div class="top"><p class="src"><a id="v:foldTM" class="def">foldTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m a <a href="#v:foldTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(log^2 V)\)</span> Folds <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> on a path between two vertices</p></div></div><div class="top"><p class="src"><a id="v:readTM" class="def">readTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; m a <a href="#v:readTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(log V)\)</span> Reads a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> value on a <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:writeTM" class="def">writeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; a -&gt; m () <a href="#v:writeTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(log V)\)</span> Write a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> value on a <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:exchangeTM" class="def">exchangeTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; <a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a> -&gt; a -&gt; m a <a href="#v:exchangeTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(log V)\)</span> Exchanges a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> value on a <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:modifyTM" class="def">modifyTM</a> :: (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/foldl-1.4.15-2de66b28054a5f7effa4957f0d2c07faf14e78e2948e7529a0c3a1acf38777e6/share/doc/html/Control-Foldl.html#t:PrimMonad" title="Control.Foldl">PrimMonad</a> m, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> a, <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Array-Manifest.html#t:Unbox" title="Data.Massiv.Array.Manifest">Unbox</a> a) =&gt; <a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a> a (<a href="file:///home/tbm/.cabal/store/ghc-9.4.6/massiv-1.0.4.0-19b7cb47d11bb2beedefb68f35aaf8ec98ca5904a14aa0c6bafffc58d6bd2807/share/doc/html/Data-Massiv-Core.html#t:PrimState" title="Data.Massiv.Core">PrimState</a> m) -&gt; (a -&gt; a) -&gt; <a href="file:///home/tbm/.cabal/store/ghc-9.4.6/Cabal-syntax-3.10.2.0-465cc56eebf457d830428e4d0465c5ff77907524a36cb8b0e93bd1408351e0d3/share/doc/html/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> -&gt; m () <a href="#v:modifyTM" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(O(log V)\)</span> Modifies a <code><a href="Data-Graph-Tree-Hld.html#t:TreeMonoid" title="Data.Graph.Tree.Hld">TreeMonoid</a></code> value on a <code><a href="Data-Graph-Alias.html#t:Vertex" title="Data.Graph.Alias">Vertex</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.27.0</p></div></body></html>